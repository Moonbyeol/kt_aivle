
# CRISP-DM
## 절차
1. Business Understanding
2. Data Understanding
3. Data Preparation
4. Modeling
5. Evaluation
6. Deployment


## 데이터 전처리의 두 가지 단계
### 1. 데이터 구조 만들기
- 행: 분석단위
- 열: 정보, 변수
### 2. 모델링을 위한 전처리
- 모든 셀은 값이 있어야
- 모든 값은 숫자
- 필요 시, 숫자의 범위 맞춰야



# 데이터프레임 변경

## 맨 뒤에 열 추가
```python
# 없는 열을 변경하면 그 열 추가
df['추가하고싶은 열'] = 추가 식
```

## 지정한 위치에 열 추가
```python
# 1번째 열 위치에 추가
df.insert(1,'div',tip['total']/tip['size'])
```

## 열 삭제
```python
df.drop('열이름', axis=1, inplace=True)
```

## 조건에 의한 값 변경

```python
# np.where
df['열'] = np.where(조건, True 일 때, False 일 때)

# .loc
df.loc[조건, 열 이름] = 변경 값

#.map()
df['sex'] = df['sex'].map({male:1, female:0})

# pd.cut() 숫자형을 범주형 변수로 변환
df['tip'] = pd.cut(tip['tip'], 3, labels = ['a','b','c'])

# bins 사용, np.inf = 무한대 값
df['tip'] = pd.cut(tip['tip'], bins=[-np.inf, 10, 40, np.inf], labels = ['a','b','c'])


```


# 데이터프레임 결합

## pd.concat()
### 방향 axis =0
- 세로(행)로 합치기(위, 아래로 붙여라)
- 칼럼 이름 기준
### 방향 axis =1
- 가로(열)로 합치기(옆으로 붙여라)
- 행 인덱스 기준
### 방법 join
- 'outer': 모든 행과 열 합치기 (기본 값)
- 'inner': 같은 행과 열만 합치기



## pd.merge()
### 지정한 칼럼의 값을 기준으로 병합
- 옆으로만 병합
- 어떤 칼럼을 기준 삼을 것인가?
- 방법 how
	- inner:
	- outer:
	- left:
	- right:
- on
	- 어떤 칼럼을 기준으로 할 지
	- 안써도 됨
```python
pd.merge(df1,df2, how='left', on='공통 칼럼명')
```


# 문제

```python
# 탑 3 뽑아내기
df.groupby('State',as_index=False)['Amt'].sum().sort_values(by='Amt', ascending=False).head(3)
```



# 시계열 데이터 처리

## 시계열 데이터 타입으로 변환
```python
df["datetime"] = pd.to_datetime(df["datetime"])

df["datetime"].dt.date
df["datetime"].dt.year
df["datetime"].dt.month
df["datetime"].dt.day
df["datetime"].dt.hour
df["datetime"].dt.minute
df["datetime"].dt.second
df["datetime"].dt.dayofweek
df.shape
```
