
## Data Understanding: EDA & CDA
### 정리된 2차원 구조의 데이터셋을 분석하는 방법
1. Exloratory Data Analysis (탐색적 데이터 분석)
2. Confirmatory Data ASnalysis (확증적 데이터 분석)
### 다음 사항을 알야하 단다.
1. (언제, 어떤) 그래프를 그리고 (어떻게) 해석
2. (언제, 어떤) 통계량를 구하고 (어떻게) 해석
3. (언제, 어떤) 가설 검정 방법을 사용하고 (어떻게) 해석





# 가설검정

## 모집단(Population)과 표본(Sample)
- 모집단: 우리가 알고 싶은 대상 전체 영역(데이터)
- 표본: 그 대상의 일부 영역(데이터)

## 우리는 일부분으로 전체를 추정하고자 한다.
- 모집단에 대한 가설 수립
	- 가설은 보통  x와 y의 관계를 표현
		- x에 따라 y가 차이가 있다.
		- x와 y는 관계가 있다.
- 표본을 가지고 가설이 진짜 그러한 지 검증(검정)

## 비즈니스 이해단계에서
- 비즈니스 문제로부터 우리의 관심사(y)를 도출하고
- y에 영향을 주는 요인 (x)들을 뽑아서
- 초기 가설 수립


## 당신의 주장을 귀무가설
- 영가설
- 현재의 가걸
- 보수적인 입장

## 나의 주장을 대립가설
- 연구가설
- 새로운 가설
- 내가 바라는 바


# 통계적 검정
## 표본으로부터 대립가설을 확인하고, 모집단에서도 맞을 것이라 주장
- 대립가설: 매장지역(x)에 따라 수요량(y)에 차이가 있다.
- 귀무가설: 매장지역(x)에 따라 수요량(y)에 차이가 없다.

## 차이의 값이 큰 지 작은 지는 어떻게 판단할 것인가?
- 분포도(KDE plot)를 그려  차이에 대하여 판단.

## 분포 + 판단 기준 필요
- 차이 값 8로 부터 p-value 계산 (차이 값이 클 수록 p-value 작아 짐)
- 판단기준(유의수준): 0.05(5%) 혹은 좀 더 보수적인 기준으로 0.01(1%)를 사용
- 0.05 보다는 p-value가 작아야 차이가 있다고 판단



# 검정 통계량

## 검정(차이가 있는지 없는지 확인)하기 위한 차이 값(검정 통계량)
- t 통계량
- x^2(카이제곱) 통계량
- f 통계량
## 이들은 각각 기준 대비 차이로 계산됩니다.
- 계산된 통계량 -> 분포를 가짐
- 분포를 통해서 그 값이(차이가) 큰 지, 작은 지 판단 가능
- 이를 손쉽게 판단할 수 있도록 계산해 준 것이 p-value



# 가설을 검정한다는 것은
## 우리가 세운 가설(대립가설)
- 오존 농도(공기 오염도)를 예측하고자 할 때,
- '온도에 따라 오존농도는 달라질 것이다.'
- P-value를 구했더니, 0.001이라면
	- 기준(유의수준)으로 정한 5%보다 작으므로
	- 우리가 세운 가설이 (모집단에서) 맞을 것이라고 판단할 수 있습니다.


# 피셔의 밀크티 실험


# 이변량 분석(숫자 -> 숫자)
![](https://i.imgur.com/A8u5yt4.png)



## 산점도
### matplotlib
- plt.scatter(x축 값, y축 값)
- plt.scatter('x변수','y변수',data=df)
```python
plt.scatter('Temp', 'Ozone', data = air)
```
### seaborn
- sns.scatterplot('x변수','y변수',data=df)
```python
sns.scatterplot(x='Temp', y='Ozone',data=air)
```


## 강한 관계? 약한 관계?
- 얼마나 직선에 모여 있는가
- x와 y의 관계를 얼마나 직선으로 잘 설명할 수 있는가


# 한번에 시각화하여 보기

```python
sns.pairplot(air)
plt.show()
```


# 직선 + 산점도
```python
sns.regplot(x='Solar.R', y='Ozone', data = air)
plt.show()
```
- 단점: 직선 관계가 없어도 무조건 직선을 그려줌


# 수치화: 상관계수, 상관분석
- 관계를 숫자로 계산해서 비교
- 관계를 수치화 - 상관계수
- 상관계수가 유의미한 지를 검증 - 상관분석


## 상관계수 공식
![](https://i.imgur.com/WuoifEl.png)


## 상관계수
- -1 ~ 1 사이의 값
- 상관계수끼리 비교 가능
- -1, 1에 가까울 수록 강한 상관관계를 나타냄

## 경험에 의한 대략의 기준(절대적 기준은 아님)
- 강한: 0.5< |r| <=1
- 중간: 0.2< |r| <=0.5
- 약한: 0.1< |r| <=0.2
- (거의)없음: |r| <=0.1


## 상관계수의 유의성 검정
- 상관계수의 크기로 판달한 수 있지만,
- 상관분석을 통해서 검정(test)할 수도 있다.


## scipy.stats 모듈
- 통계 모듈
- spst.pearsonr(피어슨) 상관분석 함수
	- 주의: nan이 있으면 계산되지 않음
	- (.notnull())을 해줘야함
	- 결과: (상관계수, p-value) tuple 형태


## p-value
- p-value를 어떻게 사용해야하는지에 초점
- 그래프로 파악하는데 한계가 있음
- 그래서, 관계를 수치화 한 값이 유의미한지 판단하는 숫자

```python
import scipy.stats as spst

# 상관계수와 p-value 
spst.pearsonr(data[var], data[target])

# 보기 좋게 수정
result = spst.pearsonr(data[var], data[target])
print(f'상관계수 : {result[0]}, p-value : {result[1]}')
```


## 한번에 상관계수 구하기
- 모든 숫자형 변수들간 상관계수 계산
- df.corr()
	- 대각선은 무시
	- 1, -1에 가까울 수록 강한 관계
```python
df.corr()
```




## heatmap 시각화

```python
plt.figure(figsize = (8, 8))
sns.heatmap(air.corr(), 
            annot = True,            # 숫자(상관계수) 표기 여부
            fmt = '.3f',             # 숫자 포멧 : 소수점 3자리까지 표기
            cmap = 'RdYlBu_r',       # 칼라맵
            vmin = -1, vmax = 1)     # 값의 최소, 최대값
plt.show()
```



# 결측치 확인, 처리
```python
air.isna().sum() # = air.isnull().sum()

```



# 숫자 vs 숫자 최종 정리
## Focus
- 직선, 선형성
- 얼마나 직선으로 잘 설명할 수 있는가
- 얼마나 직선에 점들이 모여 있는가?

## 시각화
- 산점도
- 두 숫자형 변수의 관계를 눈으로 확인
- 직선의 관계를 확인하지만, 직선이 아닌 관계(패턴)도 확인

## 수치화
- 상관계수
- p-value




# 평균 추정과 신뢰구간

## 평균과 분산, 표준편차

### 분산(Var, Variance), 표준편차(SD, Standard Deviation)
- 한 집단을 설명하기 위해서, 대푯값으로 평균을 계산했을 때
- 값들이 평균으로부터 얼마나 벗어나 있는지를 나타내는 값.(이탈도, deviation)

## 조사 방법
### 1. 표본조사
- 무작위
- 적절한 비용과 시간
- 오차가 존재

### 2. 전수조사
- 모집단 조사
- 비용, 시간 과다
- 정확


## 표본평균
- 모 평균에 대한  추정치
- 추정치에는 오차가 존재, 이 오차를 표준오차
- 모집단의 평균을 구하고 알고싶었던 것.

## 기호

![](https://i.imgur.com/7b0yJUA.png)



## 중신극한정리(Central Limit Theorem)
- 전국 고등학생 50명을 무작위로 뽑아 평균을 계산
- 100번을 반복 -> 100개의 평균 값 얻음
- 평균들의 분포 -> 정규분포에 가까워짐
	- 표본의 데이터 수(표본의 크기) >= 30개
	- 이 분포(평균들의 분포)의 평균: 모평균에 근사
- 표본의 크기(n)가 클 수록 정규분포 모양이 중신에 가까워지는 좁은 형태가 됨

## 95% 신뢰구간
- 쉬운 설명: 신뢰구간 안에 모평균이 포함될 확률이 95%
- 정확한 설명: 표본을 100번 정도 뽑으면 95번 정도는 95% 신뢰구간 안에 모평균을 포함함


# 이변량분석 (범주 -> 숫자)


## 범주가 두 개 일 때와 세 개 이상일 때 평균을 비교하는 방법

### t-test와 anova
- 범주형 x와 숫자형 y의 관계를 검정하기 위한 도구
- 평균을 비교하여 차이 검정(testing)

### t-test
- 두 그룹간 평균에 차이가 있는가?
- 그룹 a의 평균 vs 그룹 b의 평균 비교
- 범주의 수 2개일 때 사용

```python
died = temp.loc[temp['Survived']==0, 'Age']
survived = temp.loc[temp['Survived']==1, 'Age']

spst.ttest_ind(died, survived)
```


### anova
- 전체 평균과 각 그룹 평균에 차이가 있는가?
- 전체평균과 그룹평균의 차이(분산)와 그룹 내 차이(분산)를 비교
- 범주의 수 3개 이상일 때 사용







# 방향
## 1.
- 문제정의
- 분석 방향, 목표
- 가설
## 2.
- 원본 식별
- 하나의 df
- 분석


미ㅓㅏㄴ만어로나미ㅏ어오러어나미나어로나너옴리ㅏ멍뢰머ㅏㄴ오리ㅏ머노라ㅣㅓㅗ미ㅏㅓㅇ노리ㅏ머농리ㅏㅓ몬ㅇ리ㅏㅓ모니아러ㅗ미나어ㅗ람너오라ㅓㅁ노아ㅣ러ㅚㅏㅁ넝뢰ㅏㅓㅁ노아ㅓ뢰ㅏㅁ너ㅗㅇ라ㅣ머ㅗㄴㅇ라ㅣㅓㅗ미ㅏㅓㄴ오리ㅏㅁ노아ㅣ로만어ㅗ리ㅏ모니아ㅓ로마ㅣㅓㄴ오라ㅣ먼오리ㅏㅓㅁ농라ㅓㅣ뫙러ㅗ미ㅏ너오라머농리ㅏㅓ몬ㅇ라ㅣ뫼ㅏㄴㅇ러ㅗ마ㅣ넝롸ㅣㅏ머온
